<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>WhatABetterDeal™</title>

  <meta name="google-site-verification" content="i2VyhV8j9lk5nHaVbjk-cODSySED9lEjf4_djFQ1g30" />
  <meta name="msvalidate.01" content="5E25B9B09A4FA84EF3B2F96A6CBFAF68" />

  <link rel="stylesheet" href="style.css">

  <style>
    /* Top buttons */
    .top-buttons { text-align: center; margin: 20px 0; }
    .nav-button {
      display: inline-block;
      padding: 10px 20px;
      background-color: #007bff;
      color: white;
      text-decoration: none;
      border-radius: 6px;
      margin: 5px;
      font-weight: bold;
    }
    .nav-button:hover { background-color: #0056b3; }

    /* Modals */
    .modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.6);
      justify-content: center;
      align-items: center;
    }
    .modal-content {
      background: white;
      padding: 20px;
      max-width: 500px;
      width: 90%;
      border-radius: 8px;
      position: relative;
    }
    .close {
      position: absolute;
      right: 15px;
      top: 10px;
      font-size: 20px;
      cursor: pointer;
      font-weight: bold;
    }
    .close:hover { color: red; }
  </style>
</head>
<body>

<header>WhatABetterDeal<span class="tm">™</span></header>

<div class="top-buttons">
  <a href="sell.html" class="nav-button">Sell an Item</a>
  <a href="signup.html" class="nav-button">Sign Up</a>
</div>

<main class="content">

  <!-- Item 1 -->
  <div class="item" onclick="openModal('modal1','pool')">
    <img src="2bd3e9d3-b81c-4a5d-bb87-92f621cb2872.jpg" alt="Very Large Pool" class="item-image">
    <h4>OFF THE MARKET! Very Large 20-Toddler Pool</h4>
    <p class="price">$OFF THE MARKET</p>
  </div>

  <!-- Item 2 -->
  <div class="item" onclick="openModal('modal2','kids-bike')">
    <img src="8ed28031-9fcb-4509-ba9a-0fc11f8681ac.jpg" alt="Small Used Kids Bike" class="item-image">
    <h4>Discount! Small Used 5-Year-Old Kids Bike</h4>
    <p class="price">$5̶0̶ SALE NOW $25</p>
  </div>

  <!-- Ad 1 -->
  <div class="ad">
    <a href="mailto:Gabe.karekinian@gmail.com" target="_blank" style="text-decoration: none; color: inherit;">
      <h4>Want Your Brand Here?</h4>
      <p>Reach out to Gabe.karekinian@gmail.com today to advertise!</p>
    </a>
  </div>

  <!-- Ad 2 -->
  <div class="ad" onclick="window.open('https://lol-lab48.github.io/LockiGen/', '_blank');">
    <h4>Get safe, secure passwords instantly!</h4>
    <p>LockiGen</p>
  </div>

</main>

<!-- Modal 1 -->
<div class="modal" id="modal1">
  <div class="modal-content">
    <span class="close" onclick="closeModal('modal1')">✖</span>
    <h3>OFF THE MARKET! Very Large Pool for Around 20 Toddlers</h3>
    <p>Waist-height pool suitable for around 20 toddlers. Approximately 6m x 6m in size. Bought for older kids, realized it wasn't high enough. Original eBay box, unused.</p>
    <p><strong>Price:</strong> $OFF THE MARKET</p>
    <p>Contact: <a href="mailto:gabe.karekinian@gmail.com">gabe.karekinian@gmail.com</a></p>
  </div>
</div>

<!-- Modal 2 -->
<div class="modal" id="modal2">
  <div class="modal-content">
    <span class="close" onclick="closeModal('modal2')">✖</span>
    <h3>DISCOUNT! Small Used 5-Year-Old Kids Bike</h3>
    <p>This kids bike has been heavily used. I fixed the chain that came off when I was younger, and it now works properly. Currently too small to fit anyone older than 5 years.</p>
    <p>To see bike photos go to https://tinyurl.com/WhatABetterDeal-Bike-Photo-PDF</p>
    <p><strong>Price:</strong> $5̶0̶ Now $25!</p>
    <p>Contact: <a href="mailto:gabe.karekinian@gmail.com">gabe.karekinian@gmail.com</a></p>
  </div>
</div>

<footer>
  <p>⚠️ Shipping and handling are the responsibility of the lister. WhatABetterDeal<span class="tm">™</span> is not responsible for lost, damaged, or delayed items.</p>
  <p>© 2026 WhatABetterDeal<span class="tm">™</span> is a trademark of ©2026WhatABetterDeal™ PTY LTD</p>
</footer>

<!-- Full JS -->
<script>
  // Detect project base dynamically for GitHub Pages
  const pathParts = window.location.pathname.split("/");
  const projectBase = "/" + (pathParts[1] || ""); // "/WhatABetterDeal"

  // -----------------------------
  // Open modal and update URL
  // -----------------------------
  function openModal(id, slug) {
    const modal = document.getElementById(id);
    if (!modal) return;
    modal.style.display = 'flex';
    // Hash URL inside project
    history.pushState({ modal: id }, "", projectBase + "/#" + "item-" + slug);
  }

  // -----------------------------
  // Close modal and reset URL
  // -----------------------------
  function closeModal(id) {
    const modal = document.getElementById(id);
    if (!modal) return;
    modal.style.display = 'none';
    history.pushState({}, "", projectBase + "/");
  }

  // -----------------------------
  // Handle back/forward buttons (hashchange)
  // -----------------------------
  window.addEventListener("hashchange", function() {
    const hash = location.hash;

    document.querySelectorAll(".modal").forEach(modal => modal.style.display = 'none');

    if (hash === "#item-pool") document.getElementById("modal1").style.display = 'flex';
    else if (hash === "#item-kids-bike") document.getElementById("modal2").style.display = 'flex';
  });

  // -----------------------------
  // Open modal if hash exists on page load
  // -----------------------------
  window.addEventListener("load", function() {
    const hash = location.hash;
    if (hash === "#item-pool") document.getElementById("modal1").style.display = 'flex';
    else if (hash === "#item-kids-bike") document.getElementById("modal2").style.display = 'flex';
  });

  // -----------------------------
  // Close modal when clicking outside content
  // -----------------------------
  document.querySelectorAll(".modal").forEach(modal => {
    modal.addEventListener("click", (e) => {
      if (e.target === modal) closeModal(modal.id);
    });
  });

  // -----------------------------
  // Close modal on ESC
  // -----------------------------
  document.addEventListener("keydown", function(e) {
    if(e.key === "Escape") {
      document.querySelectorAll(".modal").forEach(modal => modal.style.display = 'none');
      history.pushState({}, "", projectBase + "/");
    }
  });

  // -----------------------------
  // Show thank-you message after form submission
  // -----------------------------
  document.querySelectorAll("form").forEach(form => {
    form.addEventListener("submit", function(e) {
      setTimeout(() => {
        const message = form.querySelector("#thankYouMessage");
        if (message) message.style.display='block';
      }, 200);
    });
  });
</script>

</body>
</html>
